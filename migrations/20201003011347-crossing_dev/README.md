# Migration `20201003011347-crossing_dev`

This migration has been generated by Dennis Dang at 10/3/2020, 1:13:47 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Message" ADD COLUMN "eventId" integer  NOT NULL ;

ALTER TABLE "public"."Message" ADD FOREIGN KEY ("eventId")REFERENCES "public"."Event"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201003010341-crossing_dev..20201003011347-crossing_dev
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
     provider = "postgresql"
-    url = "***"
+    url      = "postgresql://postgres:postgres@localhost:5432/crossing_dev"
 }
 generator db {
     provider = "go run github.com/prisma/prisma-client-go"
@@ -107,8 +107,9 @@
     occurred  Boolean   @default(false)
     Action    Action[]
     @@unique([storyId, sequence])
+    Message Message[]
 }
 // An Action indicates that an Avatar has taken action for an Event
 model Action {
@@ -129,33 +130,10 @@
     id        Int       @id @default(autoincrement())
     createdAt DateTime  @default(now())
     deletedAt DateTime?
     updatedAt DateTime  @updatedAt
+    event     Event     @relation(fields: [eventId], references: [id])
+    eventId   Int
     content   String
     type      String
     sequence  Int
 }
-
-// // A MessagesOnActions dictates what message corresponds to an action. It depends on the Avatar's raid team position.
-// model MessagesOnActions {
-//     createdAt DateTime  @default(now())
-//     deletedAt DateTime?
-//     updatedAt DateTime  @updatedAt
-//     message   Message   @relation(fields: [messageId], references: [id])
-//     messageId Int
-//     sequence  Int
-
-//     @@id([messageId, sequence])
-// }
-
-// // An Event may send messages to users on completion.
-// model MessagesOnEvents {
-//     createdAt DateTime  @default(now())
-//     deletedAt DateTime?
-//     updatedAt DateTime  @updatedAt
-//     message   Message   @relation(fields: [messageId], references: [id])
-//     messageId Int
-//     event     Event     @relation(fields: [eventId], references: [id])
-//     eventId   Int
-
-//     @@id([messageId, eventId])
-// }
```


